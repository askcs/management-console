define(["app","config","locals"],function(e,t,n){e.run(["$rootScope","$location","Session","Store",function(e,r,i,s){e.$on("$routeChangeStart",function(e,t,n){}),e.$on("$routeChangeSuccess",function(e,t,n){}),e.$on("$routeChangeError",function(e,t,n,r){console.error("Error: changing routes!")}),e.app=e.app||{config:t,session:{},resources:{},environment:{domain:"",geofence:{}},settings:{},logindata:{}},!_.isUndefined(e.app.session)&&i.check()&&(e.app.session=angular.fromJson(sessionStorage.getItem("session"))),!_.isUndefined(e.app.resources)&&s("user").get("resources")!==null&&(e.app.resources=s("user").get("resources"));var o=s("settings").get("mine");o?e.app.settings=o:(e.app.settings={language:t.lang},s("settings").save("mine",e.app.settings)),e.app.logindata=s("environment").get("logindata"),e.changeLanguage=function(t){e.ui=n.ui[t],e.app.settings.language=t},e.app.resources&&e.app.resources.settingsMC?e.changeLanguage(angular.fromJson(e.app.resources.settingsMC).user.language):e.changeLanguage(e.app.config.lang)}])});